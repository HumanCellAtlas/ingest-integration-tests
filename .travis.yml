language: python
python:
- 3.6
dist: trusty
install:
- pip install -r requirements.txt
addons:
  apt:
    packages:
    - jq
script:
- export SWAGGER_URL="https://dss.${TRAVIS_BRANCH}.data.humancellatlas.org/v1/swagger.json"
- mkdir -p ~/.config/hca
- jq -n .DSSClient.swagger_url=env.SWAGGER_URL > ~/.config/hca/config.${TRAVIS_BRANCH}.json
- export HCA_CONFIG_FILE=~/.config/hca/config.${TRAVIS_BRANCH}.json
- make test
branches:
  only:
  - dev
  - integration
notifications:
  slack:
    secure: HTyi9s3i9sDxgftzvbk+wTaBcNNaZVHuJBLZQghWmDE/bFcqkns36ULHUfH30rOV1Upisf4G+0sHsshErOG1sjR9mBaQkT9FW007a+/6QchF4Qslzmjz4rZk0USq9/wdwaMuBgMJQV7cSJLAxPwEml48oyx90hOAfBqmLzvXIoYkt/PU8MCzQsiUSa6ZNfGAeqArRmMq8TJkOZS9rS3WLk8np61/DIK4VEJMZZfzPxfYKr6r2A6IRsLuuy+3643bvdZMlggtKCROM8j+sR2geZ8V07BPXH2lDOS4hOuivXVl1xmJ2bkxuUW1IpFMxEFTq9Sd4l5MltTo7r7X1S+s6UNd5r/njPFA6JK20lgaCTsL7LbiHPCOWRBWvlybjv5vahqcfafj/B6TpghFgi4ZKfAgNIJC1m4JtNXynQe4yqvLehpWrV4rCnPt/FmA0j98EB/UrQF3FBPNytC5eIIY8xBf141MM5vRlKal0vKD85rOQreIpjPbwk//ZrY3Aj+wabmK7A5wZUkFjAGKehhiNnZ9FsCYnNHALKRWOKDGFgSE+tTXW1ZpE2IHTTj8jukYqfvzUPec7H2KjBVDfzdJA1y187KSo2SJoVJaC8zkE/H/jMsFZMVLzS+HDz892hKUhQSwZzmLFULuwNY/17tfXO0FKB1IgfewW0u3dcU4IvU=
